header {
  background: var(--color-card-bg-light);
  padding:15px 30px;
  box-shadow:0 2px 4px var(--color-shadow-light);
  display:flex; justify-content:space-between; align-items:center;
  position:sticky; top:0; z-index:1000;
  transition: background-color .3s, box-shadow .3s;
}
body.dark header {
  background: var(--color-card-bg-dark);
  box-shadow:0 2px 4px var(--color-shadow-dark);
}
header .logo {
  font-size:1.8em; font-weight:700;
  height:40px; width:40px;
}
.header-actions { display:flex; align-items:center; gap:15px; }
.header-actions .button,
.header-actions button {
  padding:8px 15px; border:none; border-radius:6px;
  cursor:pointer; font-size:.9em; font-weight:500;
  display:inline-flex; align-items:center; justify-content:center;
  text-decoration:none; transition: background-color .2s;
}
.upload-button { background: var(--color-accent-blue); color:#fff; }
.upload-button:hover { background: var(--color-accent-blue-hover); }
.logout-button {
  background: var(--color-input-hover-light);
  color: var(--color-text-primary-light);
}
body.dark .logout-button {
  background: var(--color-input-bg-dark);
  color: var(--color-text-primary-dark);
}
.logout-button:hover {
  background: var(--color-input-border-hover-light);
}
body.dark .logout-button:hover {
  background: var(--color-input-hover-dark);
}

main {
  flex-grow:1;
  padding:30px;
  display:grid;
  grid-template-columns:320px 1fr;
  gap:30px;
  max-width:1400px;
  margin:30px auto;
}
.sidebar {
  background: var(--color-card-bg-light);
  border-radius:8px;
  padding:25px;
  box-shadow:0 4px 12px var(--color-shadow-light);
  max-height:calc(100vh - 120px);
  overflow-y:auto;
  transition: background-color .3s, box-shadow .3s;
}
body.dark .sidebar {
  background: var(--color-card-bg-dark);
  box-shadow:0 4px 12px var(--color-shadow-dark);
}
.sidebar h2 { margin:0 0 20px; font-size:1.5em; font-weight:600; }
.category-list { list-style:none; padding:0; margin:0; }
.category-list li { margin-bottom:6px; }
.category-list a {
  display:block; padding:10px 12px;
  text-decoration:none; color: var(--color-text-secondary-light);
  border-radius:4px; transition: background-color .2s, color .2s;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.category-list a:hover,
.category-list a.active {
  background: var(--color-input-hover-light);
  color: var(--color-text-primary-light);
}
body.dark .category-list a {
  color: var(--color-text-secondary-dark);
}
body.dark .category-list a:hover,
body.dark .category-list a.active {
  background: var(--color-input-bg-dark);
  color: var(--color-text-primary-dark);
}
.category-semester-separator {
  font-size:.85em; font-weight:600;
  margin:15px 0 10px;
  padding-left:12px;
  text-transform:uppercase;
  letter-spacing:.5px;
  color: var(--color-text-secondary-light);
}
body.dark .category-semester-separator { color: var(--color-text-secondary-dark); }

.content-area {
  background: var(--color-card-bg-light);
  border-radius:8px;
  padding:25px;
  box-shadow:0 4px 12px var(--color-shadow-light);
  transition: background-color .3s, box-shadow .3s;
}
body.dark .content-area {
  background: var(--color-card-bg-dark);
  box-shadow:0 4px 12px var(--color-shadow-dark);
}
.content-area h2 { margin:0 0 25px; font-size:1.8em; font-weight:700; }

.search-bar { margin-bottom:20px; position:relative; }
.search-bar input {
  width:100%; padding:10px 15px 10px 40px;
  border:1px solid var(--color-border-light);
  border-radius:6px; background: var(--color-input-bg-light);
  color: var(--color-text-primary-light);
  transition: border-color .2s, box-shadow .2s;
}
body.dark .search-bar input {
  background: var(--color-input-bg-dark);
  border-color: var(--color-border-dark);
  color: var(--color-text-primary-dark);
}
.search-bar input:focus {
  outline:none;
  border-color: var(--color-accent-blue);
  box-shadow:0 0 0 1px var(--color-accent-blue);
}
.search-icon {
  position:absolute;
  left:12px; top:50%; transform:translateY(-50%);
  width:20px; height:20px;
  color: var(--color-text-secondary-light);
}
body.dark .search-icon { color: var(--color-text-secondary-dark); }

.note-grid {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
  gap:20px;
}
.note-card {
  background: var(--color-input-bg-light);
  border:1px solid var(--color-border-light);
  border-radius:8px;
  padding:20px;
  box-shadow:0 2px 8px rgba(0,0,0,0.03);
  transition: transform .2s, box-shadow .2s;
}
.note-card:hover {
  transform:translateY(-3px);
  box-shadow:0 4px 12px rgba(0,0,0,0.06);
}
body.dark .note-card {
  background: var(--color-input-bg-dark);
  border:1px solid var(--color-border-dark);
  box-shadow:0 2px 8px rgba(255,255,255,0.01);
}
body.dark .note-card:hover {
  box-shadow:0 4px 12px rgba(255,255,255,0.03);
}
.note-card h3 { margin:0 0 10px; font-size:1.2em; font-weight:600; }
.note-card p { margin:0 0 15px; font-size:.9em; line-height:1.5; color: var(--color-text-secondary-light); }
body.dark .note-card p { color: var(--color-text-secondary-dark); }
.category-tag {
  display:inline-block;
  background: var(--color-input-hover-light);
  color: var(--color-text-secondary-light);
  font-size:.8em;
  padding:5px 10px;
  border-radius:4px;
  margin:0 8px 8px 0;
}
body.dark .category-tag {
  background: var(--color-input-bg-dark);
  color: var(--color-text-secondary-dark);
}
.note-actions a {
  display:inline-block; margin-right:15px;
  color: var(--color-link-light);
  text-decoration:none; font-size:.9em; font-weight:500;
  transition: color .2s;
}
.note-actions a:hover {
  color: var(--color-link-hover-light);
  text-decoration:underline;
}
body.dark .note-actions a {
  color: var(--color-link-dark);
}
body.dark .note-actions a:hover {
  color: var(--color-link-hover-dark);
}
footer {
  padding:20px;
  text-align:center;
  font-size:.9em;
  color: var(--color-text-secondary-light);
  border-top:1px solid var(--color-border-light);
}
body.dark footer {
  color: var(--color-text-secondary-dark);
  border-color: var(--color-border-dark);
}

@media (max-width:768px){
  main { grid-template-columns:1fr; padding:20px; margin:20px auto; }
  header { flex-direction:column; gap:10px; padding:10px 20px; }
  .note-grid { grid-template-columns:1fr; }
  .sidebar { max-height:400px; }
}