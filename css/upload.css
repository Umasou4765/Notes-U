/* Upload Page Styles (upload.html) */

/* CSS Variables */
:root {
  --bg:#f5f7fb;
  --surface:#ffffff;
  --surface-alt:#f0f4fa;
  --text:#1c1f26;
  --text-soft:#5d6472;
  --text-faint:#7c8694;
  --border:rgba(25,33,45,0.15);
  --border-strong:rgba(25,33,45,0.28);
  --focus:#0d6efd;
  --focus-ring:0 0 0 4px rgba(13,110,253,0.30);
  --danger:#d03333;
  --danger-bg:rgba(208,51,51,0.08);
  --accent:#0d6efd;
  --accent-hover:#0b5ed7;
  --radius-sm:8px;
  --radius:14px;
  --radius-lg:20px;
  --shadow:0 10px 34px -12px rgba(0,40,110,0.18), 0 4px 18px -8px rgba(0,60,140,0.12);
  --shadow-sm:0 2px 6px rgba(0,0,0,0.08);
  --select-bg:#ffffff;
  --select-bg-hover:#f3f7fd;
  --select-bg-disabled:rgba(0,0,0,0.04);
  --file-bg:linear-gradient(145deg,#fff,#f2f6fb);
  --file-bg-dark:linear-gradient(145deg,#1d2430,#161c24);
  --gradient-accent:linear-gradient(135deg,var(--accent),var(--accent-hover) 120%);
}
body.dark {
  --bg:#0f1217;
  --surface:#161c24;
  --surface-alt:#1d2732;
  --text:#e6e9ef;
  --text-soft:#9aa4b4;
  --text-faint:#7d8895;
  --border:rgba(255,255,255,0.12);
  --border-strong:rgba(255,255,255,0.22);
  --select-bg:#1d2732;
  --select-bg-hover:#243140;
  --select-bg-disabled:rgba(255,255,255,0.06);
  --danger-bg:rgba(208,51,51,0.16);
  --shadow:0 14px 46px -14px rgba(0,0,0,0.75),0 6px 22px -10px rgba(0,0,0,0.55);
  --shadow-sm:0 2px 8px rgba(0,0,0,0.45);
}

/* Base styles */
* { box-sizing:border-box; }
body {
  margin:0;
  font-family:'Inter',system-ui,Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  min-height:100vh;
  display:flex;
  padding:48px clamp(14px,4vw,42px) 80px;
  justify-content:center;
  transition:background .6s,color .45s;
}

.container {
  width:100%;
  max-width:760px;
  background:linear-gradient(145deg,var(--surface),var(--surface-alt) 150%);
  border:1px solid var(--border);
  border-radius:28px;
  padding:50px clamp(20px,5vw,54px) 46px;
  box-shadow:var(--shadow);
  position:relative;
  overflow:hidden;
  animation:cardIn .7s cubic-bezier(.4,0,.2,1);
  backdrop-filter:blur(6px);
  display:flex;
  flex-direction:column;
}
@keyframes cardIn {
  0% { opacity:0; transform:translateY(38px) scale(.96); filter:blur(6px); }
  60% { filter:blur(0); }
  100% { opacity:1; transform:none; filter:none; }
}

h1 {
  margin:0 0 10px;
  font-size:2.05rem;
  font-weight:700;
  letter-spacing:-.5px;
  line-height:1.15;
}
p.sub {
  margin:0 0 34px;
  font-size:.98rem;
  color:var(--text-soft);
  line-height:1.55;
  max-width:640px;
}

form {
  display:flex;
  flex-direction:column;
  gap:26px;
}

/* Group layout with responsive two-up arrangement for selects */
.form-grid {
  display:grid;
  gap:24px 26px;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
}

.field {
  display:flex;
  flex-direction:column;
  gap:8px;
  position:relative;
}

label.n-label {
  font-size:.68rem;
  font-weight:600;
  letter-spacing:.55px;
  text-transform:uppercase;
  color:var(--text-faint);
  display:flex;
  align-items:center;
  gap:6px;
}

.required-indicator {
  color:var(--accent);
  font-size:.8rem;
  font-weight:700;
  line-height:1;
  position:relative;
  top:-1px;
}

.helper {
  font-size:.63rem;
  letter-spacing:.35px;
  color:var(--text-faint);
  line-height:1.25;
  margin-top:-2px;
}

/* Modern Select Wrapper */
.modern-select {
  position:relative;
}

.modern-select select {
  width:100%;
  padding:14px 46px 13px 15px;
  font:inherit;
  font-size:.9rem;
  border:1px solid var(--border);
  border-radius:14px;
  background:var(--select-bg);
  color:var(--text);
  appearance:none;
  -webkit-appearance:none;
  line-height:1.25;
  transition:border-color .35s, background .4s, box-shadow .35s;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.02);
  cursor:pointer;
}
.modern-select select:hover:not(:disabled) {
  background:var(--select-bg-hover);
}
.modern-select select:focus {
  outline:none;
  border-color:var(--focus);
  box-shadow:var(--focus-ring);
}
.modern-select select:disabled {
  cursor:not-allowed;
  opacity:.55;
  background:var(--select-bg-disabled);
}

.modern-select .chevron {
  position:absolute;
  right:14px;
  top:50%;
  width:22px;
  height:22px;
  transform:translateY(-50%);
  pointer-events:none;
  opacity:.6;
  stroke:currentColor;
  stroke-width:2;
  transition:opacity .35s;
}
.modern-select select:focus + .chevron {
  opacity:.9;
}

/* Textarea */
textarea {
  width:100%;
  padding:14px 16px 14px 15px;
  font:inherit;
  font-size:.9rem;
  line-height:1.4;
  border:1px solid var(--border);
  border-radius:16px;
  background:var(--select-bg);
  color:var(--text);
  resize:vertical;
  min-height:120px;
  transition:border-color .35s, background .4s, box-shadow .35s;
}
textarea:hover { background:var(--select-bg-hover); }
textarea:focus {
  outline:none;
  border-color:var(--focus);
  box-shadow:var(--focus-ring);
}

/* File Drop */
.file-section {
  display:flex;
  flex-direction:column;
  gap:14px;
}

.file-drop {
  border:1px dashed var(--border-strong);
  border-radius:20px;
  padding:36px 28px 32px;
  text-align:center;
  background:var(--file-bg);
  position:relative;
  cursor:pointer;
  transition:border-color .35s, background .45s, box-shadow .45s;
  box-shadow:var(--shadow-sm);
  overflow:hidden;
}
body.dark .file-drop { background:var(--file-bg-dark); }
.file-drop:hover {
  border-color:var(--focus);
  background:linear-gradient(145deg,var(--select-bg),var(--surface-alt) 140%);
}
.file-drop.dragover {
  border-color:var(--accent);
  box-shadow:0 0 0 4px rgba(13,110,253,0.20), var(--shadow-sm);
}
.file-drop p {
  margin:0 0 6px;
  font-size:.85rem;
  font-weight:500;
}
.file-drop small {
  display:block;
  font-size:.62rem;
  letter-spacing:.4px;
  opacity:.7;
  line-height:1.35;
}

.file-ok {
  display:none;
  margin-top:14px;
  font-size:.7rem;
  font-weight:600;
  letter-spacing:.5px;
  background:var(--accent);
  color:#fff;
  padding:8px 12px 7px;
  border-radius:12px;
  width:fit-content;
  margin-left:auto;
  margin-right:auto;
  box-shadow:0 6px 18px -6px rgba(0,70,160,0.55);
}

.error-message {
  display:none;
  font-size:.62rem;
  letter-spacing:.4px;
  font-weight:500;
  color:var(--danger);
  background:var(--danger-bg);
  padding:7px 10px 7px;
  border-radius:10px;
  line-height:1.25;
  position:relative;
  animation:fadeIn .35s ease;
}
.error-message::before {
  content:"!";
  position:absolute;
  left:8px;
  top:50%;
  transform:translateY(-50%);
  font-size:.55rem;
  width:16px;
  height:16px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  background:var(--danger);
  color:#fff;
  font-weight:700;
  letter-spacing:.2px;
}
.error-message.inline-icon {
  padding-left:30px;
}

@keyframes fadeIn {
  from { opacity:0; transform:translateY(-4px); }
  to { opacity:1; transform:none; }
}

.actions {
  margin-top:10px;
}

.submit-btn {
  width:100%;
  padding:16px 22px;
  border:none;
  border-radius:18px;
  font:inherit;
  font-size:1rem;
  font-weight:600;
  letter-spacing:.4px;
  color:#fff;
  cursor:pointer;
  background:var(--gradient-accent);
  box-shadow:0 10px 30px -12px rgba(0,80,180,0.55), 0 6px 16px -10px rgba(0,70,160,0.45);
  transition:background .35s, transform .55s cubic-bezier(.4,0,.2,1), box-shadow .55s;
}
.submit-btn:hover:not(:disabled){
  transform:translateY(-3px);
  box-shadow:0 14px 38px -14px rgba(0,80,180,0.65),0 8px 22px -12px rgba(0,70,160,0.55);
}
.submit-btn:active:not(:disabled){
  transform:translateY(0) scale(.96);
}
.submit-btn:disabled {
  opacity:.6;
  cursor:not-allowed;
  transform:none;
  box-shadow:none;
}

/* Focus outline for keyboard nav */
select:focus-visible,
button:focus-visible,
.file-drop:focus-visible {
  outline:2px solid var(--focus);
  outline-offset:2px;
}

.divider {
  height:1px;
  width:100%;
  background:var(--border);
  opacity:.5;
  margin:6px 0 -4px;
  border-radius:1px;
}

/* Responsive tweaks */
@media (max-width:660px){
  .container {
    border-radius:24px;
    padding:40px 28px 42px;
  }
  p.sub { margin-bottom:28px; }
  .form-grid { gap:20px 18px; }
  .submit-btn { font-size:.95rem; }
}

/* (Optional) Combobox styles section kept minimal if you enable the advanced subject picker */
.combobox {
  position:relative;
}
.combobox button.cb-trigger {
  width:100%;
  text-align:left;
  padding:14px 46px 13px 15px;
  background:var(--select-bg);
  border:1px solid var(--border);
  border-radius:14px;
  font:inherit;
  font-size:.9rem;
  cursor:pointer;
  display:flex;
  gap:8px;
  align-items:center;
  justify-content:space-between;
  color:var(--text);
  transition:border-color .35s, background .4s, box-shadow .35s;
}
.combobox button.cb-trigger:hover { background:var(--select-bg-hover); }
.combobox button.cb-trigger:focus {
  outline:none;
  border-color:var(--focus);
  box-shadow:var(--focus-ring);
}
.combobox button.cb-trigger[aria-expanded="true"] {
  border-color:var(--focus);
}
.cb-panel {
  position:absolute;
  left:0; right:0;
  top:calc(100% + 6px);
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:16px;
  box-shadow:var(--shadow);
  padding:10px 10px 12px;
  z-index:60;
  display:none;
  animation:fadeIn .25s ease;
  max-height:300px;
  overflow:auto;
}
body.dark .cb-panel { background:var(--surface-alt); }
.cb-panel.open { display:block; }
.cb-search {
  position:relative;
  margin:0 0 10px;
}
.cb-search input {
  width:100%;
  padding:10px 34px 10px 12px;
  border:1px solid var(--border);
  border-radius:12px;
  font:inherit;
  font-size:.75rem;
  background:var(--select-bg);
  color:var(--text);
  transition:border-color .3s, background .35s;
}
.cb-search input:focus {
  outline:none;
  border-color:var(--focus);
  box-shadow:0 0 0 3px rgba(13,110,253,.25);
}
.cb-options {
  list-style:none;
  margin:0;
  padding:0;
  display:flex;
  flex-direction:column;
  gap:2px;
}
.cb-options li button {
  width:100%;
  text-align:left;
  background:transparent;
  border:0;
  padding:8px 10px 8px 12px;
  font:inherit;
  font-size:.7rem;
  display:flex;
  flex-direction:column;
  gap:2px;
  border-radius:10px;
  cursor:pointer;
  color:var(--text-soft);
  transition:background .25s,color .25s;
  letter-spacing:.25px;
}
.cb-options li button .code {
  font-weight:600;
  font-size:.65rem;
  letter-spacing:.55px;
  text-transform:uppercase;
  opacity:.7;
}
.cb-options li button:hover,
.cb-options li button[aria-selected="true"],
.cb-options li button:focus {
  outline:none;
  background:var(--select-bg-hover);
  color:var(--text);
}
.cb-empty {
  padding:16px 10px;
  font-size:.65rem;
  text-align:center;
  color:var(--text-faint);
  opacity:.8;
}

/* Utility hidden (for accessible inline selects) */
.visually-hidden {
  position:absolute;
  left:-9999px;
  top:auto;
  width:1px;
  height:1px;
  overflow:hidden;
  clip:rect(1px,1px,1px,1px);
  white-space:nowrap;
}