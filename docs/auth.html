<!DOCTYPE html>
<!-- File: docs/auth.html
     Description: Authentication page (login, signup, password reset) with client-side validation.
     Notes: Keep comments and labels in English only.
-->
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Authenticate - Notes-U</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="color-scheme" content="light dark">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/app.css?v=2.0">
</head>
<body class="auth-layout">

  <button id="theme-toggle" class="theme-toggle-btn" aria-label="Toggle theme">
    <svg class="moon" viewBox="0 0 24 24"><path d="M21 12.8A9 9 0 0112.8 3a7 7 0 100 18A9 9 0 0021 12.8z"/></svg>
    <svg class="sun" viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><path d="M12 1v2m0 18v2m11-11h-2M3 12H1m16.95 7.07l-1.41-1.41M6.34 6.34L4.93 4.93m12.02 0l-1.41 1.41M6.34 17.66l-1.41 1.41"/></svg>
  </button>

  <main class="card-container auth-box">
    <div class="logo-sq">U</div>
    <h1 id="authHeading" style="margin:0 0 10px; font-size:1.8rem;">Welcome</h1>
    <p id="authLead" style="color:var(--text-soft); text-align:center; margin-bottom:30px;">Log in to continue</p>

    <div id="globalStatus" style="margin-bottom:15px; font-size:0.9rem; text-align:center;"></div>

    <div style="width:100%; flex:1;">
      <form id="loginForm" class="auth-form active" novalidate>
        <div style="margin-bottom:15px;">
          <label class="field-label">Email</label>
          <input id="login-email" type="email" required placeholder="you@example.com">
          <div class="error-msg" id="login-email-error"></div>
        </div>
        <div style="margin-bottom:20px;">
          <label class="field-label">Password</label>
          <input id="login-password" type="password" required placeholder="••••••••">
          <div class="error-msg" id="login-password-error"></div>
        </div>
        <button type="submit" class="btn-primary" id="loginBtn">Log In</button>
      </form>
      
      <form id="signupForm" class="auth-form" novalidate hidden>
        <div style="margin-bottom:15px;">
          <label class="field-label">Email</label>
          <input id="signup-email" type="email" required placeholder="student@tarumt.edu.my">
          <div class="error-msg" id="signup-email-error"></div>
        </div>
        <div style="margin-bottom:15px;">
          <label class="field-label">Password</label>
          <input id="signup-password" type="password" required placeholder="Min 8 chars">
          <div class="error-msg" id="signup-password-error"></div>
        </div>
        <div style="margin-bottom:20px;">
          <label class="field-label">Confirm Password</label>
          <input id="signup-confirm" type="password" required>
          <div class="error-msg" id="signup-confirm-error"></div>
        </div>
        <button type="submit" class="btn-primary" id="signupBtn">Create Account</button>
      </form>
    </div>
    
    <div style="margin-top:20px; font-size:0.85rem;">
      <a href="#" id="linkToSignup" style="color:var(--brand); text-decoration:none;">No account? Sign up</a>
      <a href="#" id="linkToLogin" style="color:var(--brand); text-decoration:none; display:none;">Have an account? Log in</a>
    </div>
  </main>
  
  <script type="module" src="./js/auth.js?v=2.0"></script>
</body>
</html>
    * { box-sizing:border-box; }
    body {
      margin:0;
      font-family:'Inter',system-ui,Arial,sans-serif;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px 10px 42px;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      transition:background .6s,color .45s;
      overflow-x:hidden;
    }

    /* Animated background, subtle noise layer */
    body::before, body::after {
      content:"";
      position:fixed;
      inset:0;
      z-index:-2;
      pointer-events:none;
      background:
        radial-gradient(circle at 18% 24%, var(--bg-accent-1) 0%, transparent 60%),
        radial-gradient(circle at 82% 72%, var(--bg-accent-2) 0%, transparent 65%);
      background-size:160% 160%;
      animation:floaty 18s linear infinite;
      opacity:.9;
      transition:opacity .7s;
    }
    body.dark::before, body.dark::after {
      opacity:.55;
      background:
        radial-gradient(circle at 20% 30%, rgba(70,130,255,.14) 0%, transparent 62%),
        radial-gradient(circle at 78% 75%, rgba(0,170,255,.11) 0%, transparent 68%);
    }
    body::after {
      z-index:-1;
      mix-blend-mode:overlay;
      opacity:.30;
      background-image:
        repeating-linear-gradient(45deg, rgba(255,255,255,.04) 0 2px, transparent 2px 4px);
    }
    body.dark::after {
      mix-blend-mode:normal;
      opacity:.22;
      background-image:
        repeating-linear-gradient(45deg, rgba(255,255,255,.05) 0 2px, transparent 2px 4px);
    }
    @keyframes floaty {
      0%{transform:translateY(0)}
      50%{transform:translateY(-2.2%)}
      100%{transform:translateY(0)}
    }

    .auth-container {
      width:100%;
      max-width:420px;
      background:linear-gradient(145deg,var(--panel),var(--panel-alt) 140%);
      border:1px solid var(--panel-border);
      border-radius:var(--container-radius);
      padding:44px 28px 34px;
      box-shadow:var(--shadow);
      position:relative;
      overflow:hidden;
      backdrop-filter:blur(6px) saturate(140%);
      -webkit-backdrop-filter:blur(6px) saturate(140%);
      animation:cardIn .7s var(--ease);
      display:flex;
      flex-direction:column;
      align-items:center;
      min-height:420px;
      justify-content:center;
    }
    @keyframes cardIn {
      0% { opacity:0; transform:translateY(42px) scale(.95); filter:blur(6px); }
      55% { filter:blur(0); }
      100%{ opacity:1; transform:none; filter:none; }
    }

    .logo {
      font-size:2.9rem;
      font-weight:700;
      width:90px;
      height:90px;
      border:2.5px solid currentColor;
      border-radius:26px;
      display:flex;
      align-items:center;
      justify-content:center;
      margin:0 auto 24px;
      user-select:none;
      letter-spacing:.5px;
      background:linear-gradient(140deg, rgba(255,255,255,0.55), rgba(255,255,255,0.10));
      box-shadow:inset 0 0 0 1px var(--panel-border), 0 8px 18px -4px rgba(0,0,0,0.15);
      transition:transform .6s var(--ease), background .6s;
      position:relative;
    }
    body.dark .logo {
      background:linear-gradient(140deg, rgba(255,255,255,0.10), rgba(255,255,255,0.04));
      box-shadow:inset 0 0 0 1px var(--panel-border), 0 10px 20px -5px rgba(0,0,0,0.55);
    }
    .logo:hover { transform:rotate(-2deg) scale(1.03); }

    h1 {
      margin:0 0 10px;
      font-size:2rem;
      font-weight:700;
      letter-spacing:-.5px;
      text-align:center;
      line-height:1.15;
    }
    p.lead {
      margin:0 0 28px;
      font-size:.98rem;
      line-height:1.55;
      text-align:center;
      color:var(--text-soft);
    }

    .forms-shell {
      width:100%;
      min-height:0;
      flex:1 1 auto;
      display:flex;
      flex-direction:column;
      justify-content:center;
    }
    form.auth-form {
      display:none;
      animation:fade .45s var(--ease);
      margin:0;
      width:100%;
      max-width:100%;
    }
    form.auth-form.active { display:block; }
    @keyframes fade {
      from { opacity:0; transform:translateY(14px); }
      to { opacity:1; transform:none; }
    }
    .field {
      display:flex;
      flex-direction:column;
      gap:7px;
      margin-bottom:18px;
      position:relative;
    }
    .field label {
      font-size:.70rem;
      font-weight:600;
      letter-spacing:.55px;
      text-transform:uppercase;
      color:var(--text-soft);
    }
    .input-wrap { position:relative; display:flex; align-items:center; }
    input[type="email"], input[type="password"] {
      width:100%;
      font:inherit;
      padding:13px 46px 13px 14px;
      border:1px solid var(--input-border);
      background:var(--input-bg);
      color:var(--text);
      border-radius:12px;
      line-height:1.25;
      transition:border-color .35s, box-shadow .35s, background .45s;
      box-shadow:inset 0 0 0 1px rgba(255,255,255,.02);
    }
    input:focus {
      outline:none;
      border-color:var(--brand);
      box-shadow:var(--focus-ring);
    }
    .toggle-pass {
      position:absolute;
      right:8px;
      top:50%;
      transform:translateY(-50%);
      background:transparent;
      border:none;
      cursor:pointer;
      font-size:.62rem;
      letter-spacing:.6px;
      font-weight:600;
      padding:5px 7px;
      color:var(--link);
      text-transform:uppercase;
      border-radius:6px;
    }
    .toggle-pass:hover { text-decoration:underline; }
    .errors {
      font-size:.7rem;
      color:var(--danger);
      font-weight:500;
      line-height:1.3;
      display:none;
    }
    .errors.show { display:block; }

    .auth-btn {
      --bg:var(--brand);
      --bg-hover:var(--brand-hover);
      font:inherit;
      border:none;
      padding:15px 0;
      font-size:1rem;
      font-weight:600;
      letter-spacing:.4px;
      border-radius:14px;
      background:linear-gradient(135deg,var(--bg),var(--bg-hover) 115%);
      color:#fff;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 6px 22px -8px rgba(0,60,160,.5), 0 2px 10px -4px rgba(0,60,140,.4);
      transition:background .35s, transform .5s var(--ease), box-shadow .5s var(--ease);
      width:100%;
      margin-top:4px;
    }
    .submit-btn:hover:not(:disabled){
      transform:translateY(-3px);
      box-shadow:0 10px 34px -12px rgba(0,70,170,.55), 0 4px 18px -8px rgba(0,70,160,.45);
    }
    .submit-btn:active:not(:disabled){ transform:translateY(0) scale(.96); }
    .submit-btn:disabled {
      opacity:.55;
      cursor:not-allowed;
      transform:none;
      box-shadow:none;
    }
    .switch-links {
      margin-top:18px;
      text-align:center;
      display:flex;
      flex-direction:column;
      gap:4px;
      font-size:.8rem;
      letter-spacing:.2px;
    }
    .switch-links a {
      color:var(--link);
      text-decoration:none;
      font-weight:600;
    }
    .switch-links a:hover { text-decoration:underline; }
    .forgot-link {
      font-size:.72rem;
      font-weight:500;
      text-decoration:none;
      color:var(--link);
      display:inline-block;
      margin-top:4px;
    }
    .forgot-link:hover { text-decoration:underline; }
    .forgot-panel {
      margin-top:18px;
      padding:20px 18px 22px;
      background:var(--panel-alt);
      border:1px solid var(--panel-border);
      border-radius:16px;
      display:none;
      animation:fade .45s var(--ease);
      width:100%;
    }
    .forgot-panel.active { display:block; }
    .forgot-panel h2 {
      margin:0 0 10px;
      font-size:1rem;
      font-weight:600;
      letter-spacing:.3px;
    }
    .status-line {
      font-size:.65rem;
      letter-spacing:.4px;
      color:var(--text-soft);
      min-height:1em;
      margin-top:10px;
    }
    .status-line.ok { color:var(--success); }
    .status-line.err { color:var(--danger); }
    .auth-status {
      text-align:center;
      font-size:.7rem;
      letter-spacing:.4px;
      min-height:1em;
      margin:0 0 10px;
      color:var(--text-soft);
    }
    .global-status.ok { color:var(--success); }
    .global-status.err { color:var(--danger); }

    /* Theme toggle button */
    .theme-toggle {
      position:fixed;
      top:18px;
      right:18px;
      width:50px;
      height:50px;
      border-radius:18px;
      background:var(--panel);
      border:1px solid var(--panel-border);
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      box-shadow:var(--shadow-sm);
      transition:transform .55s var(--ease), background .55s, box-shadow .45s;
      z-index:10;
      overflow:hidden;
      isolation:isolate;
    }
    .theme-toggle:hover { transform:translateY(-2px); }
    .theme-toggle:active { transform:translateY(0) scale(.95); }
    .theme-toggle svg {
      width:28px;height:28px;
      transition:opacity .45s, transform .65s var(--ease);
      stroke-linecap:round; stroke-linejoin:round;
      display:block;
      position:absolute;
      left:11px;
      top:11px;
    }
    .theme-toggle .sun { opacity:0; transform:rotate(-40deg) scale(.6);}
    body.dark .theme-toggle .sun { opacity:1; transform:rotate(0) scale(1);}
    body.dark .theme-toggle .moon { opacity:0; transform:rotate(55deg) scale(.55);}

    .theme-toggle .moon {
      stroke:#000;
      fill:rgba(0,0,0,0.05);
      filter:drop-shadow(0 2px 4px rgba(0,0,0,0.25));
      transition:stroke .45s, fill .45s;
    }
    .theme-toggle .sun {
      stroke:#ffcf33;
      fill:rgba(255,200,0,0.10);
      filter:drop-shadow(0 0 6px rgba(255,200,0,0.55));
    }
    body.dark .theme-toggle .sun {
      stroke:#ffe8a6;
      fill:rgba(255,220,120,0.15);
    }

    @media (max-width:640px){
      .auth-card {
        padding:32px 7vw 24px;
        border-radius:22px;
        min-height:320px;
      }
      .logo { width:68px; height:68px; font-size:2rem; margin-bottom:16px; }
      h1 { font-size:1.35rem; }
    }
    @media (max-width:480px){
      .auth-card { max-width:99vw; padding:26px 2vw 20px;}
    }
    @media (prefers-reduced-motion:reduce){ *{transition:none!important;animation:none!important;} }
  </style>
</head>
<body class="light">

  <main class="auth-container" role="main" aria-labelledby="authHeading">
    <div class="logo" aria-label="Notes-U Logo">U</div>
    <h1 id="authHeading">Welcome Back</h1>
    <p class="lead" id="authLead">Log in to access and manage your academic notes.</p>
    <div id="globalStatus" class="global-status" aria-live="polite"></div>
    
    <div class="forms-shell" id="formsShell">
      <!-- LOGIN -->
      <form id="loginForm" class="auth-form active" novalidate autocomplete="off" aria-describedby="globalStatus">
        <div class="field">
          <label for="login-email">Email</label>
          <div class="input-wrap">
            <input id="login-email" type="email" inputmode="email" autocomplete="email" required placeholder="you@example.com" maxlength="120">
          </div>
          <div class="errors" id="login-email-error" aria-live="polite"></div>
        </div>
        <div class="field" style="margin-bottom:12px;">
          <label for="login-password">Password</label>
          <div class="input-wrap">
            <input id="login-password" type="password" required minlength="8" autocomplete="current-password" placeholder="••••••••">
            <button type="button" class="toggle-pass" data-target="login-password" aria-label="Toggle password visibility">Show</button>
          </div>
          <div class="errors" id="login-password-error" aria-live="polite"></div>
          <a href="#" id="forgotLink" class="forgot-link">Forgot password?</a>
        </div>
        <button type="submit" class="auth-btn" id="loginBtn"><span class="btn-text">Log In</span></button>
      </form>
      
      <!-- SIGN UP -->
      <form id="signupForm" class="auth-form" novalidate autocomplete="off" hidden aria-describedby="globalStatus">
        <div class="field">
          <label for="signup-email">Email</label>
          <div class="input-wrap">
            <input id="signup-email" type="email" inputmode="email" autocomplete="email" required placeholder="you@university.edu" maxlength="120">
          </div>
          <div class="errors" id="signup-email-error" aria-live="polite"></div>
        </div>
        <div class="field">
          <label for="signup-password">Password</label>
          <div class="input-wrap">
            <input id="signup-password" type="password" required minlength="8" autocomplete="new-password" placeholder="At least 8 characters">
            <button type="button" class="toggle-pass" data-target="signup-password" aria-label="Toggle password visibility">Show</button>
          </div>
          <div class="password-meter" aria-hidden="true" style="display:none;"></div>
          <div class="inline-hint" style="font-size:.72rem;color:var(--text-soft);margin-top:3px;">Use 8+ chars. Mixing upper, number & symbol strengthens it.</div>
          <div class="errors" id="signup-password-error" aria-live="polite"></div>
        </div>
        <div class="field" style="margin-bottom:12px;">
          <label for="signup-confirm">Confirm Password</label>
          <div class="input-wrap">
            <input id="signup-confirm" type="password" required autocomplete="new-password" placeholder="Re-enter password">
            <button type="button" class="toggle-pass" data-target="signup-confirm" aria-label="Toggle password visibility">Show</button>
          </div>
          <div class="errors" id="signup-confirm-error" aria-live="polite"></div>
        </div>
        <button type="submit" class="auth-btn" id="signupBtn"><span class="btn-text">Create Account</span></button>
      </form>
    </div>
    
    <div class="switch-links" aria-live="polite">
      <a href="auth.html?signup" id="linkToSignup" style="display:block;">Don't have an account? Create one now</a>
      <a href="auth.html?login" id="linkToLogin" style="display:none;">Already have an account? Log In instead</a>
    </div>
    
    <!-- Forgot password panel -->
    <section id="forgotPanel" class="forgot-panel" aria-labelledby="forgotHeading" hidden>
      <h2 id="forgotHeading">Reset Password</h2>
      <p style="margin:0 0 14px; font-size:.75rem; line-height:1.45; color:var(--text-soft);">
        Enter your account email and a password reset link will be sent if it exists.
      </p>
      <form id="forgotForm" novalidate autocomplete="off">
        <div class="field" style="margin-bottom:4px;">
          <label for="forgot-email">Email</label>
          <div class="input-wrap">
            <input id="forgot-email" type="email" required placeholder="you@example.com" autocomplete="email">
          </div>
          <div class="errors" id="forgot-email-error" aria-live="polite"></div>
        </div>
        <button type="submit" class="auth-btn" id="forgotBtn" style="margin-top:6px;padding:14px 18px;">
          <span class="btn-text">Send Reset Link</span>
        </button>
        <div class="status-line" id="forgotStatus" aria-live="polite"></div>
        <div style="margin-top:8px;text-align:center;">
          <a href="#" id="closeForgot" class="forgot-link">Back to login</a>
        </div>
      </form>
    </section>
  </main>
  
  <script type="module" src="./js/auth.js?v=2.0"></script>
</body>
</html>