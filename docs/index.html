<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Notes-U</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<meta name="color-scheme" content="light dark">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../css/variables.css">
<link rel="stylesheet" href="../css/base.css">
<link rel="stylesheet" href="../css/app.css">
<style>
.main-landing {
  width:100%;
  max-width: 520px;
  margin: 60px auto;
  padding: var(--space-10) var(--space-8) var(--space-8);
  background: linear-gradient(145deg,var(--color-surface),var(--color-surface-alt) 140%);
  border:1px solid var(--color-border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow);
  display:flex;
  flex-direction:column;
  align-items:center;
  position:relative;
  overflow:hidden;
  animation: fadeIn .65s var(--ease);
}

.main-landing::before {
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(circle at 18% 15%, rgba(255,255,255,0.55), transparent 60%),
    radial-gradient(circle at 82% 85%, rgba(255,255,255,0.40), transparent 70%);
  opacity:.4;
  pointer-events:none;
  mix-blend-mode:overlay;
}

body.dark .main-landing::before {
  background:
    radial-gradient(circle at 25% 20%, rgba(255,255,255,0.08), transparent 62%),
    radial-gradient(circle at 75% 80%, rgba(255,255,255,0.06), transparent 68%);
  opacity:.8;
}

.logo {
  font-size: 3rem;
  font-weight:700;
  width: 96px;
  height:96px;
  display:flex;
  align-items:center;
  justify-content:center;
  border:2.5px solid currentColor;
  border-radius: 28px;
  margin: 0 0 32px;
  background: linear-gradient(140deg, rgba(255,255,255,0.55), rgba(255,255,255,0.12));
  backdrop-filter: var(--backdrop-blur);
  box-shadow: inset 0 0 0 1px var(--color-border), 0 10px 26px -8px rgba(0,0,0,0.25);
  transition: transform var(--transition), background var(--transition);
}
body.dark .logo {
  background: linear-gradient(140deg, rgba(255,255,255,0.12), rgba(255,255,255,0.04));
}
.logo:hover {
  transform: rotate(-3deg) scale(1.05);
}

h1 {
  margin:0 0 16px;
  font-size: 2.15rem;
  letter-spacing: -.5px;
  text-align:center;
}

.lead {
  margin:0 0 34px;
  text-align:center;
  font-size: 1.05rem;
  line-height:1.55;
  color: var(--color-text-soft);
}

.button-group {
  display:flex;
  gap: 18px;
  flex-wrap:wrap;
  justify-content:center;
  width:100%;
}

.theme-toggle {
  position:fixed;
  top:18px;
  right:18px;
  width:54px;
  height:54px;
  border-radius:18px;
  border:1px solid var(--color-border);
  background: linear-gradient(145deg,var(--color-surface),var(--color-surface-alt) 130%);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  box-shadow: var(--shadow-sm);
  transition: transform var(--transition-fast), box-shadow var(--transition-fast), background var(--transition);
  z-index:50;
}
.theme-toggle:hover { transform: translateY(-3px); box-shadow: var(--shadow); }
.theme-toggle:active { transform: translateY(-1px) scale(.95); }
.theme-toggle svg {
  width:30px; height:30px;
  stroke-linecap:round;
  stroke-linejoin:round;
  transition: opacity var(--transition), transform var(--transition);
}
.theme-toggle .sun { opacity:0; transform: rotate(-45deg) scale(.6); }
body.dark .theme-toggle .sun { opacity:1; transform: rotate(0deg) scale(1); }
body.dark .theme-toggle .moon { opacity:0; transform: rotate(55deg) scale(.55); }

.footer {
  text-align:center;
  margin: 40px 0 80px;
  font-size:.7rem;
  letter-spacing:.4px;
  color: var(--color-text-soft);
  opacity:.75;
}
</style>
</head>
<body class="light theming-prep">
<button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
  <svg class="moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.9">
    <path d="M21 12.8A9 9 0 0112.8 3a7 7 0 100 18A9 9 0 0021 12.8z"/>
  </svg>
  <svg class="sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.9">
    <circle cx="12" cy="12" r="5"/>
    <path d="M12 1v2m0 18v2m11-11h-2M3 12H1m16.95 7.07l-1.41-1.41M6.34 6.34L4.93 4.93m12.02 0l-1.41 1.41M6.34 17.66l-1.41 1.41"/>
  </svg>
</button>

<div class="main-landing">
  <div class="logo" aria-label="Notes-U Logo">U</div>
  <h1>Notes-U</h1>
  <p class="lead">A collaborative platform for sharing and accessing academic notes.</p>
  <div class="button-group">
    <a class="btn" href="auth.html?login">Log In</a>
    <a class="btn secondary" href="auth.html?signup">Sign Up</a>
  </div>
</div>

<div class="footer">&copy; <span id="year"></span> Notes-U</div>

<script type="module">
import { onAuth } from './firebase-init.js';

function applyTheme(theme){
  document.body.classList.remove('light','dark');
  document.body.classList.add(theme);
  localStorage.setItem('theme', theme);
}
function initTheme(){
  const stored = localStorage.getItem('theme');
  if(stored) applyTheme(stored);
  else applyTheme(window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
  document.body.classList.remove('theming-prep');
  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e=>{
    if(!localStorage.getItem('theme')) applyTheme(e.matches ? 'dark':'light');
  });
}
initTheme();

document.getElementById('themeToggle').addEventListener('click', ()=>{
  const next = document.body.classList.contains('dark') ? 'light' : 'dark';
  applyTheme(next);
});

document.getElementById('year').textContent = new Date().getFullYear();

/* Redirect if already signed in */
let redirected = false;
onAuth(user=>{
  if(user && !redirected){
    redirected = true;
    setTimeout(()=> location.replace('home.html'), 250);
  }
});
</script>
</body>
</html>